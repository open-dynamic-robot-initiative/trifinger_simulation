

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>About Singularity &mdash; TriFinger Robot Simulation 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TriFinger Robot Simulation
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Ease of Use with a Real Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="simvsreal.html">Simulation vs Real Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="driverinterface.html">Interface with a Real Robot</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sim_finger.html">The SimFinger Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="trifingerplatform.html">The TriFingerPlatform Class</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TriFinger Robot Simulation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>About Singularity</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/singularity.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="about-singularity">
<h1>About Singularity<a class="headerlink" href="#about-singularity" title="Permalink to this headline">¶</a></h1>
<p>We are using <a class="reference external" href="https://sylabs.io/guides/3.6/user-guide/">Singularity</a> to ensure that the code always runs in the same
environment (i.e. same versions of libraries installed, etc.), no matter if you
are running it locally or on our robots.</p>
<p>If you want to execute your code locally in simulation, all you need to
install is a recent version of Singularity and to download our image,
which contains all the necessary libraries (see the documentation of the specify
phase of the challenge for the download link).</p>
<div class="section" id="install-singularity">
<span id="singularity-install"></span><h2>Install Singularity<a class="headerlink" href="#install-singularity" title="Permalink to this headline">¶</a></h2>
<p>We are using Singularity version 3.6.  Other recent versions are probably also
so fine, however, we cannot guarantee compatibility for those.
Unfortunately, most versions of Ubuntu still provide Singularity version 2.x in
their official repositories.  A newer version can be installed from source in
this case.  For this you may follow the <a class="reference external" href="https://sylabs.io/guides/3.6/user-guide/quick_start.html#quick-installation-steps">official installation instructions</a> or
use the following, slightly simplified instructions (assuming you are working
with Ubuntu).</p>
<p>Install system dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get update &amp;&amp; sudo apt-get install -y \
    build-essential \
    libssl-dev \
    uuid-dev \
    libgpgme11-dev \
    squashfs-tools \
    libseccomp-dev \
    wget \
    pkg-config \
    git \
    cryptsetup
</pre></div>
</div>
<p>Get the required version of the Go compiler:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">Downloads</span>  <span class="c1"># you can save it anywhere else, just adjust paths below</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">dl</span><span class="o">.</span><span class="n">google</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">go</span><span class="o">/</span><span class="n">go1</span><span class="o">.</span><span class="mf">13.</span><span class="n">linux</span><span class="o">-</span><span class="n">amd64</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xzf</span> <span class="n">go1</span><span class="o">.</span><span class="mf">13.</span><span class="n">linux</span><span class="o">-</span><span class="n">amd64</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p>Note that it is only needed once for building singularity, so no need to install
it permanently (we just add it to PATH temporarily for building, see below).</p>
<p>Now download and unpack the singularity source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">sylabs</span><span class="o">/</span><span class="n">singularity</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="n">v3</span><span class="o">.</span><span class="mf">6.1</span><span class="o">/</span><span class="n">singularity</span><span class="o">-</span><span class="mf">3.6</span><span class="o">.</span><span class="mf">1.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xzf</span> <span class="n">singularity</span><span class="o">-</span><span class="mf">3.6</span><span class="o">.</span><span class="mf">1.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p>And finally build and install it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PATH=~/Downloads/go/bin:${PATH}  # adjust path if you used a different directory
cd singularity  # the folder to which the singularity source was extracted
./mconfig
cd builddir
make
sudo make install
</pre></div>
</div>
<p>Now you should be able to use Singularity.  You can test this, for example, by
running <code class="docutils literal notranslate"><span class="pre">singularity</span> <span class="pre">--version</span></code> which should print “singularity version
3.6.1”.  For more information on how to use Singularity, see the <a class="reference external" href="https://sylabs.io/guides/3.6/user-guide/index.html">official
documentation</a>.</p>
</div>
<div class="section" id="about-the-base-image">
<h2>About the Base Image<a class="headerlink" href="#about-the-base-image" title="Permalink to this headline">¶</a></h2>
<p>We provide a Singularity image with Ubuntu 18.04 with all dependencies of the
the simulation and the packages needed to execute your code on the real robot already installed.</p>
<blockquote>
<div><p>For most of the libraries we use the default version provided through the official Ubuntu repositories.</p>
</div></blockquote>
<p>To explore the image and to check which libraries and which versions exactly are
installed, you can run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ singularity shell path/to/blmc_ei_base.sif
</pre></div>
</div>
<p>To open a shell inside the image.</p>
</div>
<div class="section" id="add-custom-dependencies-to-the-container">
<span id="singularity-extend-container"></span><h2>Add Custom Dependencies to the Container<a class="headerlink" href="#add-custom-dependencies-to-the-container" title="Permalink to this headline">¶</a></h2>
<p>The image we provide already includes everything needed to run the robot and the
simulation.  However, you may need additional libraries to use them in our own
code, which are not yet present.  In this case, you can create your own image
which is based on our standard image but extends it with your additional
dependencies.</p>
<div class="section" id="create-the-user-image">
<h3>Create the User Image<a class="headerlink" href="#create-the-user-image" title="Permalink to this headline">¶</a></h3>
<p>To extend the image, create <em>definition file</em> like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the name of the base image below</span>
<span class="n">Bootstrap</span><span class="p">:</span> <span class="n">localimage</span>
<span class="n">From</span><span class="p">:</span> <span class="o">./</span><span class="n">blmc_ei_base</span><span class="o">.</span><span class="n">sif</span>

<span class="o">%</span><span class="n">post</span>
    <span class="c1"># Put commands to install additional dependencies here.</span>
    <span class="c1"># Make sure everything runs automatically without human input (e.g. add</span>
    <span class="c1"># `-y` to automatically say &quot;yes&quot; below).</span>
    <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">package_name</span>
</pre></div>
</div>
<p>See the official <a class="reference external" href="https://sylabs.io/guides/3.6/user-guide/definition_files.html">Documentation for Definition Files</a> for all options in the
definition file.</p>
<p>Assuming you called your definition file <code class="docutils literal notranslate"><span class="pre">user_image.def</span></code>, use the following
command to build the image.  Note that the base image (specified in the
<code class="docutils literal notranslate"><span class="pre">From:</span></code> line) needs to be present in the directory in which you call the
command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ singularity build --fakeroot user_image.sif path/to/user_image.def
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To ensure that your custom image is compatible with our setup for executing
the code, always base it off blmc_ei_base and do not modify the runscripts
or “apps” it defines.  Likewise, do not overwrite existing libraries or
applications of the base image with different versions, as we cannot guarantee
that our software will function correctly in this case.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Max Planck Institute for Intelligent Systems

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>